# Cloud Compareを用いてLiDERで取得した土の掘削量体積を求める方法
LiDERで土の掘削前と掘削後のモデルを取得した後に、掘削量を求める方法です。備忘録兼初めてのWebページ作成の勉強用
なお、この方法では一軸方向のみ考慮した2.5D体積しか求まりません。すみません。
1. 掘削前のtextured.objと掘削後のtextured.objを、ドラッグアンドドロップによりCloudCompare上で開く。2つのモデルが表示される。
2. 掘削後のモデルを選択し、Edit>Segmentから掘削後のモデルの下部を切り取る。右クリックで点の追加、左クリックで線を閉じ、右上のボタンから下部を切り取ることができる。切り取れたらチェックボタンを押す。掘削後のモデルが2分割される。<br>次のステップで掘削後のモデルを掘削前のモデルに位置合わせをするので、この作業では変換行列を求める際の誤差を防ぐために掘削部分を切り取っています。
3. 掘削前のモデルと掘削後の上部のモデルを選択し、Tools>Registration>Fine Registrationを選択する。alignedに掘削後の掘削後の上部モデル、referenceに掘削後のモデルを設定し、adjust scaleにチェックを入れてokを押す。2つのモデルの位置合わせが行われる。
4. 位置合わせが行われた掘削後の上部モデルを選択し、左下のProperties>Transformation history>Export>Clipboardから変換行列を取得する。
5. 2つに分割されている掘削後のモデルを両方とも削除する。
6. 手が加えられてない掘削後のモデルをもう一度CloudCompare上で開く。掘削後のモデルを選択し、Edit>Apply transformationを開く。4.で取得した変換行列を貼り付けてOKを押す。2つのモデルの位置合わせが行われる。
7. 掘削後のモデルを参考に、掘削部を拡大する。掘削前と掘削後のモデルを選択し、Edit>Segmentから掘削部を掘削方向の正面から見た視点から切り抜く。
8. 切り抜いた2つのモデルの点群データ(雲のようなマーク)を選択し、Tools>Volume>Compute 2.5D Volumeを開く。
9. Ground/Beforeタブに掘削前の点群データ、Ceil/Afterタブに掘削後の点群データを設定する。Gridタブのstepは計算セル数になるため、できる限り小さくする。projection dir.は差分を取る方向になるため、掘削方向に設定する。Updateを押すと体積が計算される。